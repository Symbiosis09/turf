<head>
    <title>ID Generator</title>
    <link rel="manifest" href="manifest.json">

    <script src=
"https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js">
	</script>
</head>

<h3>Date Time <span id="datedis"></span></h3>

<input type="text" id="value" value="001">

<!-- <button onclick="play()">Genera</button> -->
       <!-- <h3>QR code generator using qrcode.js</h3>
       <h3>To visit geeksforgeeks.org scan below code</h3> -->
   
       <div id="qrcode"></div>
       <button id="print" onclick="printdd()">print</button>



<button id="start-camera">Start Camera</button>
<video id="video" width="320" height="240" autoplay></video>
<button id="click-photo">Click Photo</button>
<div>
    <canvas id="canvas" width="320" height="240"></canvas>
</div>
<button id="ppp" onclick="printt()">ppp</button>


<script>
    if ("serviceWorker" in navigator) {
  // register service worker
  navigator.serviceWorker.register("service-worker.js");
}
    let camera_button = document.querySelector("#start-camera");
let video = document.querySelector("#video");
let click_button = document.querySelector("#click-photo");



let canvas = document.querySelector("#canvas");

camera_button.addEventListener('click', async function() {
   	let stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
	video.srcObject = stream;
    document.getElementById("qrcode").innerHTML = " ";
        var valueofd = document.getElementById("value").value;
        var itsme = valueofd;
		var qrcode = new QRCode("qrcode",
		itsme);
        document.getElementById("value").value = " ";
});

click_button.addEventListener('click', function() {
   	canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
   	let image_data_url = canvas.toDataURL('image/jpeg');

   	// data url of the image
   	// console.log(image_data_url);
    var canvass = document.getElementById("canvas").innerHTML;
    // console.log(canvass);
    // window.print(canvass)
});

function printt(){
    document.getElementById("video").style.display = "none";
    document.getElementById("print").style.display = "none";

    document.getElementById("start-camera").style.display = "none";

    document.getElementById("click-photo").style.display = "none";
    document.getElementById("value").style.display = "none";
    document.getElementById("ppp").style.display = "none";

    // var ToPrint = document.getElementById("qrcode").innerHTML;
    //     var bodyconetnts = document.body.innerHTML;
    //     document.body.innerHTML = ToPrint;
        window.print();
            // document.body.innerHTML = bodyconetnts;
    // window.print();
}

// function play(){
//         document.getElementById("qrcode").innerHTML = " ";
//         var valueofd = document.getElementById("value").value;
//         var itsme = valueofd;
// 		var qrcode = new QRCode("qrcode",
// 		itsme);
//         document.getElementById("value").value = " ";
        
//         // window.print(qrcode); 

//         }

        // function printdd(){
        //     var ToPrint = document.getElementById("qrcode").innerHTML;
        // var bodyconetnts = document.body.innerHTML;
        // document.body.innerHTML = ToPrint;
        // window.print();
        //     document.body.innerHTML = bodyconetnts;
        // }

        // function Dated(){
        //     var date = new Date();
        // document.getElementById("datedis").innerHTML = date;
        // }
       
       setInterval(()=>{
        var date = new Date();
        document.getElementById("datedis").innerHTML = date;
       },1000);
</script>